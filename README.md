# تحلیل معاملات سهام بازارگردان

**نویسنده:** پریسا میکلانی  

**مهارت‌ها:** SQL  تحلیل داده‌های مالی، محاسبات پیشرفته با  

---

## معرفی پروژه
این پروژه معاملات یک سهامدار بازارگردان را تحلیل می‌کند و برای هر معامله:

- ارزش تجمعی سهام

- نرخ خرید هر سهم

- بهای تمام‌شده فروش

- سود/زیان واقعی

را محاسبه می‌کند.  


---

## ویژگی‌ها
- محاسبه ارزش تجمعی و تعداد تجمعی سهام  

- تعیین نرخ خرید هر سهم و بهای تمام‌شده فروش  

- محاسبه سود/زیان معاملات خرید و فروش  

- پشتیبانی از معاملات با مقادیر منفی و مثبت  


---

ردیف	تاریخ		ماه	تعداد		مبلغ		نوع معامله	تعدادروز	نرخ	بهای تمام شده تجمعی	تعداد تجمعی 	سود 		میانگین	بهای تمام شده فروش
1	14040101	01	30801434	450587946210	1	0	14629	450587946210		30801434	0		0	450587946210
2	14040102	01	-120000		2504400000	-1	360	14629	448832490488		30681434	-748944279	0	-1755455721
3	14040104	01	-30000		636600000	-1	359	14629	448393626558		30651434	-197736070	0	-438863930
4	14040106	01	30000		630000000	1	359	14635	449023626558		30681434	0		29507	630000000
5	14040115	01	-120000		2616000000	-1	356	14635	447267423273		30561434	-859796715	0	-1756203285  




---

## مهارت‌های نشان داده شده

- SQL پیشرفته: CTE،WHILE تجمیع داده، محاسبات تجمعی، حلقه 
  
- تحلیل معاملات مالی و محاسبه سود/زیان واقعی  

- مدیریت داده‌های تاریخی (تبدیل تاریخ شمسی به میلادی و محاسبه اختلاف روزها)  

---

## نحوه اجرا

1. اجرای فایل `shareholder_analysis.sql` در SQL Server
  
2.مشاهده خروجی

3. استفاده از داده‌های خروجی برای تحلیل یا مصورسازی بیشتر (اختیاری)
